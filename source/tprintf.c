// used mostly for debug/error messages only

#include <stdio.h>
#include <stdint.h>
#include <stdarg.h>

#include "quakedef.h"
#include "quakegeneric.h"

// font
static const uint8_t font5x8[2048] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x88, 0xD8, 0x88,
	0xF8, 0xA8, 0x70, 0x00, 0x70, 0xF8, 0xA8, 0xF8, 0x88, 0xD8, 0x70, 0x00,
	0x50, 0xF8, 0xF8, 0xF8, 0xF8, 0x70, 0x20, 0x00, 0x00, 0x20, 0x70, 0xF8,
	0x70, 0x20, 0x00, 0x00, 0x20, 0x70, 0x20, 0xF8, 0xA8, 0x20, 0x70, 0x00,
	0x20, 0x20, 0x70, 0xF8, 0xF8, 0x20, 0x70, 0x00, 0x00, 0x00, 0x20, 0x70,
	0x70, 0x20, 0x00, 0x00, 0xF8, 0xF8, 0xD8, 0x88, 0x88, 0xD8, 0xF8, 0xF8,
	0x00, 0x00, 0x20, 0x50, 0x50, 0x20, 0x00, 0x00, 0xF8, 0xF8, 0xD8, 0xA8,
	0xA8, 0xD8, 0xF8, 0xF8, 0x38, 0x18, 0x28, 0x40, 0xA0, 0xA0, 0x40, 0x00,
	0x20, 0x50, 0x50, 0x20, 0x20, 0x70, 0x20, 0x00, 0x38, 0x28, 0x38, 0x20,
	0x60, 0xE0, 0xC0, 0x00, 0x38, 0x28, 0x38, 0x28, 0x68, 0xC8, 0x18, 0x00,
	0x20, 0xA8, 0x50, 0xD8, 0x50, 0xA8, 0x20, 0x00, 0x80, 0xC0, 0xE0, 0xF0,
	0xE0, 0xC0, 0x80, 0x00, 0x08, 0x18, 0x38, 0x78, 0x38, 0x18, 0x08, 0x00,
	0x20, 0x70, 0xF8, 0x20, 0x20, 0xF8, 0x70, 0x20, 0x50, 0x50, 0x50, 0x50,
	0x50, 0x00, 0x50, 0x00, 0x78, 0xA8, 0xA8, 0x68, 0x28, 0x28, 0x28, 0x00,
	0x30, 0x48, 0x20, 0x50, 0x20, 0x90, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xF0, 0xF0, 0x00, 0x20, 0x70, 0xF8, 0x20, 0xF8, 0x70, 0x20, 0xF8,
	0x20, 0x70, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x70, 0x20, 0x00, 0x00, 0x20, 0x10, 0xF8, 0x10, 0x20, 0x00, 0x00,
	0x00, 0x20, 0x40, 0xF8, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80,
	0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0xF8, 0x50, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x20, 0x70, 0x70, 0xF8, 0x00, 0x00, 0xF8, 0x70, 0x70,
	0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x20, 0x70, 0x70, 0x20, 0x20, 0x00, 0x20, 0x00, 0xA0, 0xA0, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0xF8, 0x50, 0xF8, 0x50, 0x00, 0x00,
	0x40, 0x70, 0x80, 0x60, 0x10, 0xE0, 0x40, 0x00, 0x00, 0x00, 0x90, 0x20,
	0x40, 0x90, 0x00, 0x00, 0x20, 0x50, 0x20, 0x20, 0x68, 0x90, 0x68, 0x00,
	0x20, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x20, 0x00, 0x40, 0x20, 0x20, 0x20, 0x20, 0x20, 0x40, 0x00,
	0x00, 0x90, 0x60, 0xF0, 0x60, 0x90, 0x00, 0x00, 0x00, 0x20, 0x20, 0x70,
	0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x80,
	0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x40, 0x40, 0x00, 0x10, 0x10, 0x20, 0x20, 0x40, 0x40, 0x80, 0x00,
	0x60, 0x90, 0xB0, 0xD0, 0x90, 0x90, 0x60, 0x00, 0x20, 0x60, 0x20, 0x20,
	0x20, 0x20, 0x70, 0x00, 0x60, 0x90, 0x10, 0x20, 0x40, 0x80, 0xF0, 0x00,
	0x60, 0x90, 0x10, 0x20, 0x10, 0x90, 0x60, 0x00, 0x20, 0x60, 0xA0, 0xA0,
	0xF0, 0x20, 0x20, 0x00, 0xF0, 0x80, 0xE0, 0x10, 0x10, 0x90, 0x60, 0x00,
	0x20, 0x40, 0x80, 0xE0, 0x90, 0x90, 0x60, 0x00, 0xF0, 0x90, 0x10, 0x20,
	0x40, 0x40, 0x40, 0x00, 0x60, 0x90, 0x90, 0x60, 0x90, 0x90, 0x60, 0x00,
	0x60, 0x90, 0x90, 0x70, 0x10, 0x10, 0x60, 0x00, 0x00, 0x00, 0x40, 0x00,
	0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x40, 0x40, 0x80,
	0x00, 0x20, 0x40, 0x80, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00,
	0xF0, 0x00, 0x00, 0x00, 0x00, 0x40, 0x20, 0x10, 0x20, 0x40, 0x00, 0x00,
	0x60, 0x90, 0x10, 0x20, 0x20, 0x00, 0x20, 0x00, 0x70, 0x88, 0xB8, 0xA8,
	0xB8, 0x80, 0x70, 0x00, 0x60, 0x90, 0x90, 0xF0, 0x90, 0x90, 0x90, 0x00,
	0xE0, 0x90, 0x90, 0xE0, 0x90, 0x90, 0xE0, 0x00, 0x60, 0x90, 0x80, 0x80,
	0x80, 0x90, 0x60, 0x00, 0xE0, 0x90, 0x90, 0x90, 0x90, 0x90, 0xE0, 0x00,
	0xF0, 0x80, 0x80, 0xE0, 0x80, 0x80, 0xF0, 0x00, 0xF0, 0x80, 0x80, 0xE0,
	0x80, 0x80, 0x80, 0x00, 0x60, 0x90, 0x80, 0xB0, 0x90, 0x90, 0x60, 0x00,
	0x90, 0x90, 0x90, 0xF0, 0x90, 0x90, 0x90, 0x00, 0xE0, 0x40, 0x40, 0x40,
	0x40, 0x40, 0xE0, 0x00, 0x10, 0x10, 0x10, 0x10, 0x10, 0x90, 0x60, 0x00,
	0x90, 0xA0, 0xC0, 0xC0, 0xA0, 0x90, 0x90, 0x00, 0x80, 0x80, 0x80, 0x80,
	0x80, 0x80, 0xF0, 0x00, 0x90, 0xF0, 0x90, 0x90, 0x90, 0x90, 0x90, 0x00,
	0x90, 0xD0, 0xD0, 0xB0, 0xB0, 0x90, 0x90, 0x00, 0x60, 0x90, 0x90, 0x90,
	0x90, 0x90, 0x60, 0x00, 0xE0, 0x90, 0x90, 0xE0, 0x80, 0x80, 0x80, 0x00,
	0x60, 0x90, 0x90, 0x90, 0xD0, 0xA0, 0x70, 0x00, 0xE0, 0x90, 0x90, 0xE0,
	0xA0, 0x90, 0x90, 0x00, 0x60, 0x90, 0x80, 0x60, 0x10, 0x90, 0x60, 0x00,
	0xE0, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x90, 0x90, 0x90, 0x90,
	0x90, 0x90, 0x60, 0x00, 0x90, 0x90, 0x90, 0x90, 0x90, 0x60, 0x60, 0x00,
	0x90, 0x90, 0x90, 0x90, 0x90, 0xF0, 0x90, 0x00, 0x90, 0x90, 0x60, 0x60,
	0x90, 0x90, 0x90, 0x00, 0x88, 0x88, 0x50, 0x20, 0x20, 0x20, 0x20, 0x00,
	0xF0, 0x10, 0x20, 0x40, 0x80, 0x80, 0xF0, 0x00, 0x70, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x70, 0x00, 0x80, 0x40, 0x40, 0x20, 0x20, 0x10, 0x10, 0x00,
	0xE0, 0x20, 0x20, 0x20, 0x20, 0x20, 0xE0, 0x00, 0x60, 0x90, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8,
	0x40, 0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x10,
	0x70, 0x90, 0x70, 0x00, 0x80, 0x80, 0xE0, 0x90, 0x90, 0x90, 0xE0, 0x00,
	0x00, 0x00, 0x60, 0x90, 0x80, 0x90, 0x60, 0x00, 0x10, 0x10, 0x70, 0x90,
	0x90, 0x90, 0x70, 0x00, 0x00, 0x00, 0x60, 0x90, 0xE0, 0x80, 0x60, 0x00,
	0x20, 0x50, 0x40, 0xE0, 0x40, 0x40, 0x40, 0x00, 0x00, 0x00, 0x60, 0x90,
	0x90, 0x70, 0x10, 0x60, 0x80, 0x80, 0xA0, 0xD0, 0x90, 0x90, 0x90, 0x00,
	0x40, 0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x10, 0x00, 0x10, 0x10,
	0x10, 0x90, 0x90, 0x60, 0x80, 0x80, 0xB0, 0xE0, 0xA0, 0x90, 0x90, 0x00,
	0xC0, 0x40, 0x40, 0x40, 0x40, 0x40, 0xE0, 0x00, 0x00, 0x00, 0x90, 0xF0,
	0x90, 0x90, 0x90, 0x00, 0x00, 0x00, 0xE0, 0x90, 0x90, 0x90, 0x90, 0x00,
	0x00, 0x00, 0x60, 0x90, 0x90, 0x90, 0x60, 0x00, 0x00, 0x00, 0xE0, 0x90,
	0x90, 0xE0, 0x80, 0x80, 0x00, 0x00, 0x70, 0x90, 0x90, 0x70, 0x10, 0x10,
	0x00, 0x00, 0xA0, 0xD0, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x70, 0x80,
	0x60, 0x10, 0xE0, 0x00, 0x40, 0x40, 0xE0, 0x40, 0x40, 0x40, 0x30, 0x00,
	0x00, 0x00, 0x90, 0x90, 0x90, 0xB0, 0x50, 0x00, 0x00, 0x00, 0x90, 0x90,
	0x90, 0x60, 0x60, 0x00, 0x00, 0x00, 0x90, 0x90, 0x90, 0xF0, 0x90, 0x00,
	0x00, 0x00, 0x90, 0x60, 0x60, 0x90, 0x90, 0x00, 0x00, 0x00, 0x90, 0x90,
	0x90, 0x70, 0x10, 0xE0, 0x00, 0x00, 0xF0, 0x20, 0x40, 0x80, 0xF0, 0x00,
	0x30, 0x40, 0x40, 0xC0, 0x40, 0x40, 0x30, 0x00, 0x40, 0x40, 0x40, 0x00,
	0x40, 0x40, 0x40, 0x00, 0xC0, 0x20, 0x20, 0x30, 0x20, 0x20, 0xC0, 0x00,
	0x50, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x50, 0x88,
	0x88, 0xF8, 0x00, 0x00, 0x60, 0x90, 0x80, 0x90, 0x60, 0x10, 0x60, 0x00,
	0x90, 0x00, 0x90, 0x90, 0x90, 0xB0, 0x50, 0x00, 0x90, 0x00, 0x60, 0x90,
	0xE0, 0x80, 0x60, 0x00, 0x20, 0x50, 0x60, 0x10, 0x70, 0x90, 0x70, 0x00,
	0x90, 0x00, 0x60, 0x10, 0x70, 0x90, 0x70, 0x00, 0x40, 0x20, 0x60, 0x10,
	0x70, 0x90, 0x70, 0x00, 0x60, 0x00, 0x60, 0x10, 0x70, 0x90, 0x70, 0x00,
	0x00, 0x60, 0x90, 0x80, 0x70, 0x20, 0x40, 0x00, 0x60, 0x90, 0x60, 0x90,
	0xE0, 0x80, 0x60, 0x00, 0x90, 0x00, 0x60, 0x90, 0xE0, 0x80, 0x60, 0x00,
	0x40, 0x20, 0x60, 0x90, 0xE0, 0x80, 0x60, 0x00, 0x00, 0x90, 0x00, 0x60,
	0x20, 0x20, 0x70, 0x00, 0x60, 0x90, 0x00, 0x60, 0x20, 0x20, 0x70, 0x00,
	0x40, 0x20, 0x00, 0xC0, 0x40, 0x40, 0xE0, 0x00, 0x90, 0x00, 0x60, 0x90,
	0xF0, 0x90, 0x90, 0x00, 0x60, 0x60, 0x00, 0x60, 0x90, 0xF0, 0x90, 0x00,
	0x20, 0x40, 0xF0, 0x80, 0xE0, 0x80, 0xF0, 0x00, 0x00, 0x00, 0xD0, 0x28,
	0x70, 0xA0, 0x58, 0x00, 0x38, 0x50, 0x90, 0xF8, 0x90, 0x90, 0x98, 0x00,
	0x40, 0xA0, 0x00, 0x60, 0x90, 0x90, 0x60, 0x00, 0x00, 0x90, 0x00, 0x60,
	0x90, 0x90, 0x60, 0x00, 0x40, 0x20, 0x00, 0x60, 0x90, 0x90, 0x60, 0x00,
	0x40, 0xA0, 0x00, 0x90, 0x90, 0x90, 0x60, 0x00, 0x40, 0x20, 0x00, 0x90,
	0x90, 0x90, 0x60, 0x00, 0x00, 0x90, 0x00, 0x90, 0x90, 0x70, 0x10, 0x60,
	0x90, 0x00, 0x60, 0x90, 0x90, 0x90, 0x60, 0x00, 0x90, 0x00, 0x90, 0x90,
	0x90, 0x90, 0x60, 0x00, 0x00, 0x20, 0x70, 0x80, 0x80, 0x70, 0x20, 0x00,
	0x20, 0x50, 0x40, 0xE0, 0x40, 0x90, 0xF0, 0x00, 0x88, 0x50, 0xF8, 0x20,
	0xF8, 0x20, 0x20, 0x00, 0xE0, 0x90, 0xE0, 0x90, 0xB8, 0x90, 0x98, 0x00,
	0x10, 0x28, 0x20, 0x70, 0x20, 0xA0, 0x40, 0x00, 0x20, 0x40, 0x60, 0x10,
	0x70, 0x90, 0x70, 0x00, 0x20, 0x40, 0x00, 0x60, 0x20, 0x20, 0x70, 0x00,
	0x20, 0x40, 0x00, 0x60, 0x90, 0x90, 0x60, 0x00, 0x20, 0x40, 0x00, 0x90,
	0x90, 0x90, 0x60, 0x00, 0x50, 0xB0, 0x00, 0xE0, 0x90, 0x90, 0x90, 0x00,
	0x50, 0xB0, 0x00, 0xD0, 0xB0, 0x90, 0x90, 0x00, 0x60, 0xA0, 0x70, 0x00,
	0xF0, 0x00, 0x00, 0x00, 0x60, 0x90, 0x60, 0x00, 0xF0, 0x00, 0x00, 0x00,
	0x20, 0x00, 0x20, 0x20, 0x40, 0x90, 0x60, 0x00, 0x00, 0x00, 0xF8, 0x80,
	0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x08, 0x08, 0x00, 0x00, 0x00,
	0x90, 0xA0, 0x40, 0xA0, 0x10, 0x20, 0x70, 0x00, 0x90, 0xA0, 0x40, 0x90,
	0x30, 0x78, 0x10, 0x00, 0x40, 0x00, 0x40, 0x40, 0xE0, 0xE0, 0x40, 0x00,
	0x00, 0x00, 0x48, 0x90, 0x90, 0x48, 0x00, 0x00, 0x00, 0x00, 0x90, 0x48,
	0x48, 0x90, 0x00, 0x00, 0x48, 0x90, 0x48, 0x90, 0x48, 0x90, 0x48, 0x90,
	0x50, 0xA8, 0x50, 0xA8, 0x50, 0xA8, 0x50, 0xA8, 0xD8, 0x70, 0xD8, 0xE8,
	0xD8, 0x70, 0xD8, 0xE8, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0xC0, 0x40, 0x40, 0x40, 0x40, 0x40, 0xC0, 0x40,
	0xC0, 0x40, 0x40, 0x40, 0x50, 0x50, 0x50, 0x50, 0xD0, 0x50, 0x50, 0x50,
	0x00, 0x00, 0x00, 0x00, 0xF0, 0x50, 0x50, 0x50, 0x00, 0x00, 0xC0, 0x40,
	0xC0, 0x40, 0x40, 0x40, 0x50, 0x50, 0xD0, 0x10, 0xD0, 0x50, 0x50, 0x50,
	0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0x00, 0x00, 0xF0, 0x10,
	0xD0, 0x50, 0x50, 0x50, 0x50, 0x50, 0xD0, 0x10, 0xF0, 0x00, 0x00, 0x00,
	0x50, 0x50, 0x50, 0x50, 0xF0, 0x00, 0x00, 0x00, 0x40, 0x40, 0xC0, 0x40,
	0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x78, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x40,
	0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x78, 0x40, 0x40, 0x40, 0x00, 0x00, 0x00, 0x00,
	0xF8, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x40, 0xF8, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x78, 0x40, 0x78, 0x40, 0x40, 0x40, 0x50, 0x50, 0x50, 0x50,
	0x58, 0x50, 0x50, 0x50, 0x50, 0x50, 0x58, 0x40, 0x78, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x78, 0x40, 0x58, 0x50, 0x50, 0x50, 0x50, 0x50, 0xD8, 0x00,
	0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0xD8, 0x50, 0x50, 0x50,
	0x50, 0x50, 0x58, 0x40, 0x58, 0x50, 0x50, 0x50, 0x00, 0x00, 0xF8, 0x00,
	0xF8, 0x00, 0x00, 0x00, 0x50, 0x50, 0xD8, 0x00, 0xD8, 0x50, 0x50, 0x50,
	0x40, 0x40, 0xF8, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x50, 0x50, 0x50, 0x50,
	0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0xF8, 0x40, 0x40, 0x40,
	0x00, 0x00, 0x00, 0x00, 0xF8, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50,
	0x78, 0x00, 0x00, 0x00, 0x40, 0x40, 0x78, 0x40, 0x78, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x78, 0x40, 0x78, 0x40, 0x40, 0x40, 0x00, 0x00, 0x00, 0x00,
	0x78, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0x50, 0xF8, 0x50, 0x50, 0x50,
	0x40, 0x40, 0xF8, 0x40, 0xF8, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x40, 0x40, 0x40,
	0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0x00,
	0xF8, 0xF8, 0xF8, 0xF8, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0,
	0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xF8, 0xF8, 0xF8, 0xF8,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x50, 0xA0, 0xA0, 0x58, 0x00,
	0x00, 0x60, 0x90, 0xE0, 0x90, 0xE0, 0x80, 0x80, 0xF0, 0x90, 0x80, 0x80,
	0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0xF8, 0xD0, 0x50, 0x50, 0x50, 0x00,
	0xF0, 0x90, 0x40, 0x20, 0x40, 0x90, 0xF0, 0x00, 0x00, 0x00, 0x70, 0xA0,
	0xA0, 0xA0, 0x40, 0x00, 0x00, 0x00, 0x50, 0x50, 0x50, 0x70, 0x40, 0x80,
	0x00, 0x00, 0x58, 0xA0, 0x20, 0x20, 0x20, 0x00, 0x00, 0xE0, 0x40, 0xA0,
	0xA0, 0x40, 0xE0, 0x00, 0x00, 0x60, 0x90, 0xF0, 0x90, 0x90, 0x60, 0x00,
	0x00, 0x70, 0x88, 0x88, 0x50, 0x50, 0xD8, 0x00, 0x60, 0x80, 0x40, 0x60,
	0x90, 0x90, 0x60, 0x00, 0x00, 0x00, 0x50, 0xA8, 0xA8, 0x50, 0x00, 0x00,
	0x00, 0x10, 0x60, 0xB0, 0xD0, 0x60, 0x80, 0x00, 0x00, 0x70, 0x80, 0xF0,
	0x80, 0x70, 0x00, 0x00, 0x00, 0x60, 0x90, 0x90, 0x90, 0x90, 0x90, 0x00,
	0x00, 0xF0, 0x00, 0xF0, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x20, 0x70, 0x20,
	0x00, 0x70, 0x00, 0x00, 0x80, 0x40, 0x20, 0x40, 0x80, 0x00, 0xF0, 0x00,
	0x20, 0x40, 0x80, 0x40, 0x20, 0x00, 0xF0, 0x00, 0x20, 0x50, 0x50, 0x40,
	0x40, 0x40, 0x40, 0x00, 0x20, 0x20, 0x20, 0x20, 0xA0, 0xA0, 0x40, 0x00,
	0x00, 0x60, 0x00, 0xF0, 0x00, 0x60, 0x00, 0x00, 0x00, 0x50, 0xA0, 0x00,
	0x50, 0xA0, 0x00, 0x00, 0x60, 0x90, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60,
	0x00, 0x00, 0x00, 0x00, 0x30, 0x20, 0x20, 0x20, 0xA0, 0x60, 0x20, 0x00,
	0xC0, 0xA0, 0xA0, 0xA0, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x20, 0x40, 0xE0,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0xE0, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

int tputchar(int x, int y, int ch) {
    const uint8_t *f = font5x8 + (ch << 3);
    uint8_t *d = &FRAME_BUF[y*QUAKEGENERIC_RES_X + x];

    for (int y = 0; y < 8; y++) {
        int gl = *f++;
        
        if (gl & (0x80)) d[0] = 0x0F;
        if (gl & (0x40)) d[1] = 0x0F;
        if (gl & (0x20)) d[2] = 0x0F;
        if (gl & (0x10)) d[3] = 0x0F;
        if (gl & (0x08)) d[4] = 0x0F;

        d += QUAKEGENERIC_RES_X;
    }
    return 0;
}

int tputstr (int x, int y, const char *str) {
	while (*str != 0) {
		if (x >= QUAKEGENERIC_RES_X || *str == '\n') {y += 8; x = 0;}
        tputchar(x, y, *str++); x += 5;
    }
    return 0;
}

// printf 
int tprintf(int x, int y, const char *format, ...) {
    char buffer[128];      // large enough
    va_list arglist;

    va_start(arglist, format);
    int rtn = vsnprintf(buffer, sizeof(buffer), format, arglist);
    tputstr(x, y, buffer);
    va_end(arglist);

    return rtn;
};
